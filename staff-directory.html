<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Leadership - UKBRUM</title>
    <link rel="icon" type="image/png" href="images/logo.png">
    <link rel="shortcut icon" type="image/png" href="images/logo.png">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/info-pages.css">
    <link rel="stylesheet" href="css/accessibility.css">
    <link rel="stylesheet" href="css/announcements.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="js/maintenance-check-simple.js"></script>
    <script src="js/script.js" defer></script>
    <script src="js/accessibility.js" defer></script>
    <script src="js/announcements.js" defer></script>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html">
                    <img src="images/logo.png" alt="UKBRUM Logo">
                    <h1><span class="full-name">United Kingdom Birmingham Roleplay</span><span class="short-name">UKBRUM</span></h1>
                </a>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#departments">Departments</a></li>
                    <li><a href="info.html">Information</a></li>
                    <li><a href="staff-directory.html">Our Leadership</a></li>
                </ul>
            </nav>

            <div class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <section class="info-hero staff-directory">
        <div class="container">
            <h1>Meet Our Leadership</h1>
            <p>Meet the team behind the scenes of Birmingham Roleplay. Our senior management team is full of dedication, enthusiasiam and are trustworthy.</p>
        </div>
    </section>

    <section class="info-section">
        <div class="container">
            <div class="staff-grid" id="staffGrid">
                <div class="loading">Loading staff directory...</div>
            </div>
        </div>
    </section>

<div id="footer"></div>

<script>
  fetch("footer.html")
    .then(response => response.text())
    .then(data => {
      // Inject footer HTML
      document.getElementById("footer").innerHTML = data;

      // Update year dynamically
      document.getElementById("year").textContent = new Date().getFullYear();

      // Update "last updated" in UK format
      const lastUpdatedEl = document.getElementById("last-updated");
      if (lastUpdatedEl) {
        lastUpdatedEl.textContent = new Date(document.lastModified)
          .toLocaleDateString("en-GB", {
            day: "2-digit",
            month: "2-digit",
            year: "numeric"
          });
      }
    })
    .catch(error => console.error("Error loading footer:", error));
</script>

    <script>
        let allStaff = [];
        let filteredStaff = [];

        document.addEventListener('DOMContentLoaded', async function() {
            await loadStaffDirectory();
            setupSearch();
            setupFilters();
        });

        async function loadStaffDirectory() {
            try {
                const response = await fetch('data/staff-directory.json');
                const data = await response.json();
                allStaff = data.staff;
                filteredStaff = [...allStaff];
                displayStaff(filteredStaff);
            } catch (error) {
                document.getElementById('staffGrid').innerHTML = '<div class="error-message">Failed to load staff directory</div>';
            }
        }

        function displayStaff(staff) {
            const grid = document.getElementById('staffGrid');
            const container = document.querySelector('.info-section .container');
            
            // Remove existing past staff section
            const existingPastSection = container.querySelector('.past-staff-section');
            if (existingPastSection) {
                existingPastSection.remove();
            }
            
            if (staff.length === 0) {
                grid.innerHTML = '<div class="no-results">No staff members found</div>';
                return;
            }

            // Separate current and past staff
            const currentStaff = staff.filter(member => member.employed !== false);
            const pastStaff = allStaff.filter(member => member.employed === false);

            grid.innerHTML = currentStaff.map(member => {
                const roleClass = member.role.toLowerCase().replace(/\s+/g, '-').replace('&', '');
                
                // If Website Developer, render a special banner card
                if (member.role === "Server Manager") {
                    return `
                        <div class="staff-card website-developer" data-role="${member.role}">
                            <div class="dev-banner">
                                <img class="dev-avatar" src="${member.avatar}" alt="${member.name}" onerror="this.src='images/default-avatar.png'">
                                <div class="dev-info">
                                    <h3>${member.name}</h3>
                                    <span class="dev-role">${member.role}</span>
                                    
                                </div>
                            </div>
                        </div>
                    `;
                }

                // If Founder, render a special banner card
                if (member.role === "Founder" || member.role === "Co-Founder") {
                    return `
                        <div class="staff-card founder" data-role="${member.role}">
                            <div class="founder-banner">
                                <img class="founder-avatar" src="${member.avatar}" alt="${member.name}" onerror="this.src='images/default-avatar.png'">
                                <div class="founder-info">
                                    <h3>${member.name}</h3>
                                    <div class="role-badge founder">${member.role}</div>
                                </div>
                            </div>
                        </div>
                    `;
                }
                                
                if (member.role === "Ast-Founder") {
                    return `
                        <div class="staff-card founder" data-role="${member.role}">
                            <div class="founder-banner">
                                <img class="founder-avatar" src="${member.avatar}" alt="${member.name}" onerror="this.src='images/default-avatar.png'">
                                <div class="founder-info">
                                    <h3>${member.name}</h3>
                                    <div class="role-badge ast-founder">${member.role}</div>
                                </div>
                            </div>
                        </div>
                    `;
                }

                // Default staff card
                const needsSupport = member.name === 'Pjer' && member.healthStatus !== 'recovered';
                const specialClass = needsSupport ? ' pjer-special' : '';
                const supportRibbon = needsSupport ? '<div class="support-ribbon"><i class="fas fa-ribbon"></i></div>' : '';
                
                return `
                        <div class="staff-card founder" data-role="${member.role}">
                            <div class="founder-banner">
                                <img class="founder-avatar" src="${member.avatar}" alt="${member.name}" onerror="this.src='images/default-avatar.png'">
                                <div class="founder-info">
                                    <h3>${member.name}</h3>
                                    <div class="role-badge">${member.role}</div>
                                </div>
                            </div>
                        </div>
                `;
            }).join('');
        }
    </script>
</body>
</html>